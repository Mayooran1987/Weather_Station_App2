shiny::runApp()
runApp()
runApp()
runApp()
library(shiny)
library(plotly)
library(readxl)
library(httr)
library(DT)  # Add DT package
# UI section
ui <- fluidPage(
titlePanel(tags$div("Ariviyal Nagar Weather Station Data", style = "color: blue; text-align: center;")),
tags$head(
tags$style(
HTML("
#weatherPlot {
width: 100%;
height: 80vh; /* Adjust as needed */
}
.footer {
position: fixed;
bottom: 0;
width: 100%;
background-color: #f5f5f5; /* Adjust as needed */
padding: 10px;
text-align: center;
}
")
)
),
sidebarLayout(
sidebarPanel(
style = "width: 300px;",  # Adjust the width as needed
checkboxGroupInput("variables", "Select Variables to Plot:",
choices = c("W/m² Solar Radiation",	 "mm Precipitation",	 "Lightning Activity",	 "km Lightning Distance",	 "° Wind Direction",	 "m/s Wind Speed",
"m/s Gust Speed",	 "°C Air Temperature",	 "RH Relative Humidity",	 "kPa Atmospheric Pressure",	 "° X-axis Level",
"° Y-axis Level",	 "mm/h Max Precip Rate",	 "°C RH Sensor Temp",	 "m³/m³ Water Content_10cm depth",
"°C Soil Temperature_10cm depth",	 "mS/cm Bulk EC_10cm depth",	 "m³/m³ Water Content_20cm depth",	 "°C Soil Temperature_20cm depth",
"mS/cm Bulk EC_20cm depth",	 "m³/m³ Water Content_30cm depth",	 "°C Soil Temperature_30cm depth",	 "mS/cm Bulk EC_30cm depth",	 "% Battery Percent",
"mV Battery Voltage",	 "kPa Reference Pressure",	 "°C Logger Temperature"),
selected = c("°C Air Temperature")),
helpText("Select the variable(s) you want to plot from the list.", style = "color: red;")
)
,
mainPanel(
style = "width: calc(80% - 300px);",  # Adjust the width as needed
tabsetPanel(
tabPanel("Graphs", plotlyOutput("weatherPlot")),
tabPanel("Data", DTOutput("data_table")),  # Changed to DTOutput
tabPanel("Summary", verbatimTextOutput("summary_tab"))
)
)
),
tags$div(class = "footer", "App developed by Dr T. Mayooran, © 2024 Department of Inter Disciplinary Studies, Faculty of Engineering, University of Jaffna. Email contact: ",
tags$a(href = "mailto:mayooran@eng.jfn.ac.lk", class = "email", "mayooran@eng.jfn.ac.lk"))
)
server <- function(input, output) {
# Download and read data from Excel file
data <- reactive({
url <- "https://raw.githubusercontent.com/Mayooran1987/Ariviyal-Nagar-Weather-Station/main/AriviyalN_Data1.xlsx"
temp_file <- tempfile(fileext = ".xlsx")
GET(url, write_disk(temp_file))
df <- read_excel(temp_file)
unlink(temp_file)  # Delete temporary file after reading
df
})
# Load summary data
summary_data <- reactive({
url <- "https://raw.githubusercontent.com/Mayooran1987/Ariviyal-Nagar-Weather-Station/main/summary.txt"
summary <- readLines(url)
summary
})
# Render the data table using DT
output$data_table <- renderDT({  # Changed to renderDT
data()
})
output$weatherPlot <- renderPlotly({
plot_data <- data()
plot_data$Date <- as.POSIXct(plot_data$Timestamp, "%H:%M:%S")
selected_vars <- input$variables
p <- plot_ly()
for (var in selected_vars) {
p <- p %>% add_trace(x = ~Date, y = as.formula(paste0("~`", var, "`")), data = plot_data, type = 'scatter', mode = 'markers+lines', name = var)
# Add trend line
lm_fit <- lm(plot_data[[var]] ~ plot_data$Date)
trend_line <- predict(lm_fit, newdata = data.frame(plot_data$Date))
p <- p %>% add_trace(x = plot_data$Date, y = trend_line, type = 'scatter', mode = 'lines', name = paste(var, "Trend"))
}
p <- p %>% layout(title = "Ariviyal Nagar Weather Station Data",
xaxis = list(title = "Date"),
yaxis = list(title = "Value"),
legend = list(x = 0.01, y = 0.99),
plot_bgcolor = '#e5ecf7',
height = 700,  # Adjust as needed
width = 1500    # Adjust as needed
)
p <- p %>% layout(legend = list(x = 0.01, y = 0.99),
xaxis = list(
zerolinecolor = '#ffff',
zerolinewidth = 2,
gridcolor = '#ffff'),
yaxis = list(
zerolinecolor = '#ffff',
zerolinewidth = 2,
gridcolor = '#ffff')
)
# p <- p %>%
#   animation_slider(
#     currentvalue = list(prefix = "Date ", font = list(color="red"))
#   )
#
p
})
# Render the summary tab
output$summary_tab <- renderText({
summary_data()
})
}
# Run the application
shinyApp(ui = ui, server = server)
runApp()
library(shiny); runApp('app1.R')
shiny::runApp()
runApp('app1.R')
runApp('app1.R')
runApp('app1.R')
runApp('app1.R')
runApp('app12.R')
runApp('app12.R')
runApp('app12.R')
runApp('app12.R')
runApp()
runApp()
runApp('app1.R')
runApp()
shiny::runApp()
shiny::runApp()
